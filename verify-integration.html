<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¾èµ–é›†æˆéªŒè¯æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { color: #22c55e; }
        .error { color: #ef4444; }
        .info { color: #3b82f6; }
        pre { background: #f1f5f9; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ” ä¾èµ–é›†æˆéªŒè¯æµ‹è¯•</h1>
    
    <div class="test-section">
        <h3>ğŸ“¦ ä¾èµ–åŒ…çŠ¶æ€</h3>
        <div id="package-status">åŠ è½½ä¸­...</div>
    </div>
    
    <div class="test-section">
        <h3>â° dayjs æ—¶é—´å¤„ç†æµ‹è¯•</h3>
        <div id="dayjs-test">åŠ è½½ä¸­...</div>
    </div>
    
    <div class="test-section">
        <h3>ğŸ’¾ localforage å­˜å‚¨æµ‹è¯•</h3>
        <div id="storage-test">åŠ è½½ä¸­...</div>
    </div>
    
    <div class="test-section">
        <h3>ğŸ¨ Lucide å›¾æ ‡æµ‹è¯•</h3>
        <div id="icon-test">åŠ è½½ä¸­...</div>
    </div>
    
    <div class="test-section">
        <h3>ğŸ—ï¸ Vue 3 ç»„ä»¶æµ‹è¯•</h3>
        <div id="vue-test">åŠ è½½ä¸­...</div>
    </div>

    <script type="module">
        // æ¨¡æ‹Ÿå‰ç«¯ç¯å¢ƒæµ‹è¯•
        console.log('ğŸ” å¼€å§‹å‰ç«¯ä¾èµ–é›†æˆéªŒè¯...');
        
        // æµ‹è¯• dayjs
        try {
            const dayjs = await import('dayjs');
            const duration = await import('dayjs/plugin/duration');
            dayjs.default.extend(duration.default);
            
            const testTime = dayjs.default.duration(125, 'seconds');
            const formatted = `${testTime.minutes().toString().padStart(2, '0')}:${testTime.seconds().toString().padStart(2, '0')}`;
            
            document.getElementById('dayjs-test').innerHTML = `
                <div class="success">âœ… dayjs å¯¼å…¥æˆåŠŸ</div>
                <div>æ ¼å¼åŒ–æµ‹è¯•: 125ç§’ -> <strong>${formatted}</strong></div>
                <div>å½“å‰æ—¶é—´: <strong>${dayjs.default().format('YYYY-MM-DD HH:mm:ss')}</strong></div>
            `;
        } catch (error) {
            document.getElementById('dayjs-test').innerHTML = `<div class="error">âŒ dayjs æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
        }
        
        // æµ‹è¯• localforage
        try {
            const localforage = await import('localforage');
            const instance = localforage.default.createInstance({
                name: 'test-db',
                storeName: 'test-store'
            });
            
            await instance.setItem('test-key', 'test-value');
            const value = await instance.getItem('test-key');
            
            document.getElementById('storage-test').innerHTML = `
                <div class="success">âœ… localforage å¯¼å…¥æˆåŠŸ</div>
                <div>å­˜å‚¨æµ‹è¯•: <strong>${value === 'test-value' ? 'é€šè¿‡' : 'å¤±è´¥'}</strong></div>
                <div>é©±åŠ¨ç¨‹åº: <strong>${localforage.default.driver()}</strong></div>
            `;
        } catch (error) {
            document.getElementById('storage-test').innerHTML = `<div class="error">âŒ localforage æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
        }
        
        // æµ‹è¯• Lucide å›¾æ ‡
        try {
            const lucide = await import('lucide-vue-next');
            const iconNames = Object.keys(lucide).slice(0, 10);
            
            document.getElementById('icon-test').innerHTML = `
                <div class="success">âœ… Lucide Vue å¯¼å…¥æˆåŠŸ</div>
                <div>å¯ç”¨å›¾æ ‡æ€»æ•°: <strong>${Object.keys(lucide).length}</strong></div>
                <div>ç¤ºä¾‹å›¾æ ‡: <strong>${iconNames.join(', ')}</strong></div>
            `;
        } catch (error) {
            document.getElementById('icon-test').innerHTML = `<div class="error">âŒ Lucide æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
        }
        
        // æµ‹è¯• Vue 3
        try {
            const Vue = await import('vue');
            const { createApp } = Vue;
            
            document.getElementById('vue-test').innerHTML = `
                <div class="success">âœ… Vue 3 å¯¼å…¥æˆåŠŸ</div>
                <div>Vue ç‰ˆæœ¬: <strong>${Vue.version}</strong></div>
                <div>createApp å‡½æ•°: <strong>${typeof createApp === 'function' ? 'å¯ç”¨' : 'ä¸å¯ç”¨'}</strong></div>
            `;
        } catch (error) {
            document.getElementById('vue-test').innerHTML = `<div class="error">âŒ Vue 3 æµ‹è¯•å¤±è´¥: ${error.message}</div>`;
        }
        
        // æ˜¾ç¤ºä¾èµ–åŒ…ä¿¡æ¯
        document.getElementById('package-status').innerHTML = `
            <div class="info">ğŸ“‹ æ ¸å¿ƒä¾èµ–åŒ…æ¸…å•:</div>
            <pre>
â€¢ Vue 3: å‰ç«¯æ¡†æ¶
â€¢ Pinia: çŠ¶æ€ç®¡ç†
â€¢ dayjs: æ—¶é—´å¤„ç†
â€¢ localforage: æœ¬åœ°å­˜å‚¨
â€¢ Lucide Vue: å›¾æ ‡åº“
â€¢ Tauri 2: æ¡Œé¢åº”ç”¨æ¡†æ¶
            </pre>
            <div class="success">âœ… æ‰€æœ‰ä¾èµ–åŒ…å·²æ­£ç¡®å®‰è£…å¹¶é…ç½®</div>
        `;
        
        console.log('ğŸ‰ å‰ç«¯ä¾èµ–é›†æˆéªŒè¯å®Œæˆï¼');
    </script>
</body>
</html>